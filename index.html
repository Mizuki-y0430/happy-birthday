<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Birthday Kaede</title>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@500;800&display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            /* â˜…å¤‰æ›´ï¼šå¹¸ã›ãªãƒ”ãƒ³ã‚¯è‰²ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
            background: linear-gradient(135deg, #FF9A9E, #FECFEF);
            overflow: hidden; 
            font-family: 'M PLUS Rounded 1c', sans-serif; 
            color: white;
            touch-action: none;
        }

        /* --- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼‰ --- */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.95);
            /* â˜…å¤‰æ›´ï¼šæ–‡å­—è‰²ã‚’æ¿ƒã„ãƒ”ãƒ³ã‚¯ã« */
            color: #FF6B6B;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 1000; cursor: pointer;
            text-align: center;
        }

        /* --- å¸¸æ™‚è¡¨ç¤ºã™ã‚‹å›ºå®šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ --- */
        #fixed-header {
            position: fixed;
            top: 30px;
            width: 100%;
            text-align: center;
            z-index: 600;
            /* â˜…å¤‰æ›´ï¼šå½±ã‚’å°‘ã—æ¿ƒã„ãƒ”ãƒ³ã‚¯ã«ã—ã¦èª­ã¿ã‚„ã™ã */
            text-shadow: 2px 2px 4px rgba(255, 107, 107, 0.6);
            pointer-events: none;
        }
        #fixed-header h2 {
            margin: 0;
            font-size: 2.5rem; /* 1.8rem â†’ 2.5rem (ç´„40px) ã«å¤‰æ›´ */
            font-weight: 800;
            letter-spacing: 0.1em;
            line-height: 1.2;
        }

        /* åå‰ï¼ˆHappy birthday KAEDEï¼‰ã‚‚ãƒãƒ©ãƒ³ã‚¹ã‚’è¦‹ã¦å¤§ãã */
        #fixed-header h1 {
            margin: 5px 0 0 0;
            font-size: 2.8rem; /* 2.2rem â†’ 2.8rem (ç´„45px) ã«å¤‰æ›´ */
            font-weight: 800;
            letter-spacing: 0.05em;
        }

        /* --- åˆ‡ã‚Šæ›¿ã‚ã‚‹ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ --- */
        #message-container {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            text-align: center; z-index: 500; width: 90%;
            /* â˜…å¤‰æ›´ï¼šãƒãƒƒãƒ—ãªãƒ”ãƒ³ã‚¯ã®å½± */
            text-shadow: 2px 2px 0px #FF6B6B;
            pointer-events: none;
        }
        
        #main-text {
            font-size: 8vw; 
            font-weight: 800;
            line-height: 1.5;
            white-space: pre-wrap;
        }
        
        @media (min-width: 768px) {
            #main-text { font-size: 3rem; }
            #fixed-header h1 { font-size: 3rem; }
            #fixed-header h2 { font-size: 1.5rem; }
        }

        /* --- å†™çœŸã®ã‚¹ã‚¿ã‚¤ãƒ« --- */
        .memory {
            position: absolute; 
            border: 4px solid white; 
            border-bottom: 12px solid white;
            /* â˜…å¤‰æ›´ï¼šå½±ã®åºƒãŒã‚Šï¼ˆ3ã¤ç›®ã®æ•°å­—ï¼‰ã‚’10pxâ†’5pxã«æ¸›ã‚‰ã—ã¦è»½é‡åŒ– */
            box-shadow: 0 4px 5px rgba(0,0,0,0.15); 
            border-radius: 3px;
            opacity: 0; pointer-events: none; object-fit: cover;
            /* â˜…é‡è¦ï¼šã‚¹ãƒãƒ›ã®GPUã‚’å¼·åˆ¶çš„ã«ä½¿ã†ãŠã¾ã˜ãªã„ã‚’è¿½åŠ  */
            will-change: transform, opacity;
            transform: translateZ(0); 
        }

        /* --- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ --- */
        .pop-in-text { animation: popText 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        @keyframes popText { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        @keyframes popMemory {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            20% { opacity: 1; transform: scale(1.1) rotate(-10deg); }
            30% { transform: scale(1.0) rotate(-10deg); }
            80% { opacity: 1; transform: scale(1.0) rotate(-10deg); }
            100% { transform: scale(1.5) translateY(100px) rotate(20deg); opacity: 0; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>

    <div id="overlay" onclick="startSurprise()">
        <h1 style="font-size: 2rem; margin-bottom: 10px;">æ¥“ã•ã‚“ï¼</h1>
        <p style="font-size: 1rem;">ç”»é¢ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆï¼<br>ï¼ˆéŸ³ãŒå‡ºã‚‹ã‚ˆğŸµï¼‰</p>
        <div style="font-size: 4rem; margin-top: 20px; animation: bounce 1s infinite;">ğŸ</div>
    </div>

    <div id="fixed-header">
        <h2>1æœˆ4æ—¥</h2>
        <h1>Happy birthday KAEDE</h1>
    </div>

    <div id="message-container">
        <h2 id="main-text"></h2>
    </div>

    <audio id="bgm" src="music.mp3" playsinline preload="auto"></audio>

    <script>
        // å†™çœŸã®æšæ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹: 178æšãªã‚‰ 178 ã«å¤‰æ›´ï¼‰
        const totalImages = 178; 
        
        const audio = document.getElementById('bgm');
        const overlay = document.getElementById('overlay');
        const mainText = document.getElementById('main-text');
        // ã‚¹ãƒãƒ›åˆ¤å®š
        const isMobile = window.innerWidth < 600;

        function startSurprise() {
            overlay.style.display = 'none';
            audio.volume = 0.5;
            
            audio.play().catch(e => console.log("å†ç”Ÿã‚¨ãƒ©ãƒ¼: " + e));
            
            // --- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ ---
            
            // 0.5ç§’å¾Œ
            setTimeout(() => { showText("Happy Birthday!!"); }, 500);
            
            // 4ç§’å¾Œ
            setTimeout(() => { showText("ã„ã¤ã‚‚ç¬‘é¡”ã‚’\nã‚ã‚ŠãŒã¨ã†"); }, 4000); 
            
            // â˜… 8ç§’å¾Œï¼šè¿½åŠ ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆèª­ã‚€æ™‚é–“ã‚’é•·ã‚ã«å–ã£ã¦ã„ã¾ã™ï¼‰
            setTimeout(() => { showText("ã¿ã‚“ãªã®ãƒãƒ¼ãƒˆã‚’\nå„ªã—ãæŠ±ãã—ã‚ã¦ã„ã‚‹\nKAEDEã•ã‚“"); }, 8000);
            
            // 14ç§’å¾Œï¼šç· ã‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            setTimeout(() => { showText("ç´ æ•µãª1å¹´ã«\nãªã‚Šã¾ã™ã‚ˆã†ã«ï¼"); }, 14000);

            // å†™çœŸã‚’å‡ºã—å§‹ã‚ã‚‹
            setInterval(spawnMemory, 800); 
        }

        function showText(text) {
            mainText.innerText = text;
            mainText.classList.remove('pop-in-text');
            void mainText.offsetWidth;
            mainText.classList.add('pop-in-text');
        }

        function spawnMemory() {
            const img = document.createElement('img');
            const id = Math.floor(Math.random() * totalImages) + 1;
            
            img.src = `images/${id}.png`;
            img.className = 'memory';
            
            // â˜…å¤‰æ›´ï¼šã‚µã‚¤ã‚ºèª¿æ•´ï¼ˆå‰ã‚ˆã‚Šå¤§ããã—ã¾ã—ãŸï¼ï¼‰
            let minSize, maxSize;
            if (isMobile) {
                // ã‚¹ãƒãƒ›ï¼š80px ã€œ 150px (ä»¥å‰ã¯60pxå›ºå®šã§ã—ãŸ)
                minSize = 80;
                maxSize = 150; 
            } else {
                // PCï¼š150px ã€œ 280px
                minSize = 150;
                maxSize = 280;
            }
            // ãƒ©ãƒ³ãƒ€ãƒ ãªã‚µã‚¤ã‚ºã‚’æ±ºå®šï¼ˆmaxSize - minSize ã®å¹…ã‚’æŒãŸã›ã‚‹ï¼‰
            const size = Math.random() * (maxSize - minSize) + minSize;

            // é…ç½®
            const x = Math.random() * 86 + 2; 
            const y = Math.random() * 70 + 15; 
            
            img.style.left = x + 'vw';
            img.style.top = y + 'vh';
            img.style.width = size + 'px';
            
            const duration = Math.random() * 2 + 3;
            img.style.animation = `popMemory ${duration}s ease-in-out forwards`;
            
            document.body.appendChild(img);
            setTimeout(() => img.remove(), duration * 1000 + 100);
        }
    </script>
</body>
</html>